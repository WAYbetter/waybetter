{% extends "base_passenger.html" %}
{% load i18n %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" href="/static/css/nivo-slider.css" type="text/css" media="screen" />

<script src="/static/js/jquery.form.js"></script>
<script src="/static/js/ordering.js"></script>
<script src="/static/js/jquery.nivo.slider.pack.js" type="text/javascript"></script>

<script src="http://api.navigator.telmap.com/maps/api/js?sensor=false"></script>
<script>
    $(document).ready(function() {
        OrderingHelper.init({
            resolve_address_url:        "{% url ordering.passenger_controller.resolve_address %}",
            resolve_coordinate_url:     "{% url ordering.passenger_controller.resolve_coordinates %}",
            estimation_service_url:     "{% url ordering.passenger_controller.estimate_ride_cost %}",
            not_a_passenger_response:   "{{ not_a_passenger }}",
            not_a_user_response:        "{{ not_a_user }}",
            telmap_user:                "{{ telmap_user }}",
            telmap_password:            "{{ telmap_password}}",
            address_helper_msg_from:    "{% trans 'Full Pickup Address: (Street Number City)' %}",
            address_helper_msg_to:      "{% trans 'Full Drop-off Address: (Street Number City)' %}",
            autocomplete_msg:           "{% trans '(Street Number City) and Select:' %}",
            address_not_resolved_msg:   "{% trans 'The address is not resolved' %}"
        });
        $("#tabs").tabs({

            ajaxOptions: {
                error: function(xhr, status, index, anchor) {
                    $(anchor.hash).html("{% trans "We're sorry, but an error occurred while loading this page." %}");
                }
            }
        });
        SelectFromHistoryHelper.init($("#tabs"), { fetch_address_url: "{% url ordering.passenger_controller.get_order_address %}" });
        $("#feedback_peal").click(function() {
            Registrator.openFeedbackDialog();
        });
        
        $("#slider").nivoSlider({
            controlNav: false,
            directionNav: false,
            pauseTime:6000,
            slices:15,
            animSpeed:700,
            effect: "sliceDown",
            startSlide: 0
        });
    });

</script>
<style type="text/css">

    #mobile {
        text-align: center;
    }
    #mobile h2 {
        margin-bottom: 21px;
        font-weight: bold;
        color: #00aeef;
    }
    #mobile #mobile-footer {
        background-color: #d9d9d9;
        width:100%;
        color: #ec008c;
        text-transform: uppercase;
        font-size: 28px;
        font-weight: bold;
        background-image: url(/static/images/smartphones_os.png);
        background-position: 610px 0;
        background-repeat: no-repeat;
        margin-top: 3px;
        margin-bottom: 3px;
    }


</style>
{% endblock %}

{% block content %}
                <div id="roller">
                    <span class="img fade left-fade"></span>
                    <span class="img fade right-fade"></span>{{ marquee_text }}
                    <marquee behavior="scroll" scrollamount="1" direction="left" width="870">
                        Coming soon... &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The easiest way to get a taxi! &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WAYbetter are the best  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::
                    </marquee>
				</div>
				<div id="yellow_header" class="round">
					<span id="taxi_tab" class="img"><h1>{% trans 'TAXI' %}</h1></span>
					<div>
						<p>
							{% trans 'Book Now (FREE)' %}
						</p>
					</div>
				</div>
                <div class="gray_header">
					<form id="order_form" method="post" action="{% url ordering.passenger_controller.book_order %}">
                        {% csrf_token %}
                        {% for field in form %}
                            {% if field.name in hidden_fields %}
                                {{ field.as_hidden }}
                            {% else %}
                                <input type="hidden" id="id_geocoded_{{ field.name }}" name="geocoded_{{ field.name }}"/>
                            {%  endif %}
                        {% endfor %}
                        <ul>
                            <li>
                                <input type=text class="big_text a_marker marker_disabled" id="id_from_raw" name="from_raw" placeholder="{% trans 'Enter pickup address' %}"/>
                            </li>
                            <li>
                                <input type=text class="big_text b_marker marker_disabled" id="id_to_raw" name="to_raw" placeholder="{% trans 'Enter drop-off address' %}"/>
                            </li>
                        </ul>
						<button class="order_button" id="order_button"></button>
					</form>
					<div id="map_container">
                        <div id="map"></div>
                        <div id="map_overlay_left"></div>
                        <div id="map_overlay_top"></div>
                        <div id="ride_cost_estimate"></div>
					</div>
                    <div class="clear"></div>
				</div>
        <div id="tabs" class="main_tabs_margin_top">
        {% if request.user.passenger %}
                <ul>
                    <li><a title="history" href="{% url ordering.passenger_controller.get_passenger_orders_history %}">{% trans 'Ride History' %}</a></li>
                    <li><a title="profile" href="{% url ordering.passenger_controller.profile_page %}">{% trans 'My Profile' %}</a></li>
                </ul>
        {% else %}
            <ul>
                <li><a title="stations" href="#stations">{% trans 'Taxi Stations' %}</a></li>
                <li><a title="mobile" href="#mobile">{% trans 'Mobile' %}</a></li>
                <li><a title="whats_this" href="#about">{% trans "What's This?" %}</a></li>
            </ul>
            <div id="stations">
                Stations
            </div>
            <div id="mobile">
                <h2>{% trans "Get a Taxi. Wherever You Are!" %}</h2>
                <img src="/static/images/mobile_button.png">
                <div id="mobile-footer">{% trans "Coming soon to all mobiles!" %}</div>
            </div>
            <div id="about" style="text-align:center">
                <div id="slider">
                    <img src="/static/images/anim_1.png" alt="" />
                    <img src="/static/images/anim_2.png" alt="" />
                    <img src="/static/images/anim_3.png" alt="" />
                </div>
                <h1>{% trans 'WAYbetter offers the fastest and easiest way to get a taxi!' %}</h1>
                <p>
                    {% trans "We are partnering with the best taxi stations in your city, so all you have to do is push the yellow button. We'll do the rest" %}
                </p>
            </div>
        {% endif %}
        </div>

        <div id="dialog"></div>
    <div id="feedback_peal"></div>
{% endblock content %}
{% block footer %}
{{ block.super}}
<span id="footer-links">
    <a href="{% url ordering.passenger_controller.info_pages %}#about">{% trans 'About' %}</a>
    <a href="{% url ordering.passenger_controller.info_pages %}#press">{% trans 'Press' %}</a>
    <a href="{% url ordering.passenger_controller.info_pages %}#help">{% trans 'Help' %}</a>
    <a href="{% url ordering.passenger_controller.info_pages %}#terms">{% trans 'Terms' %}</a>
    <a href="{% url ordering.station_controller.stations_home %}">{% trans 'Station Entrance' %}</a>
</span>
<span id="footer-copyright">
    &copy; {% trans '2010 WAYbetter' %}
</span>
{% endblock footer %}