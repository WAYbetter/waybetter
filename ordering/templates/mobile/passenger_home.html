{% extends "mobile/base.html" %}
{% load i18n %}

{% block extrahead %}
{{ block.super }}
<script src="/static/js/jquery.form.js"></script>
<script src="/static/js/ordering.mobile.js"></script>
<script src="http://api.navigator.telmap.com/maps/api/js?sensor=false"></script>
<script>
    $(document).ready(function() {
        OrderingHelper.init({
            resolve_address_url:        "{% url ordering.passenger_controller.resolve_address %}",
            resolve_coordinate_url:     "{% url ordering.passenger_controller.resolve_coordinates %}",
            estimation_service_url:     "{% url ordering.passenger_controller.estimate_ride_cost %}",
            not_a_passenger_response:   "{{ not_a_passenger }}",
            not_a_user_response:        "{{ not_a_user }}",
            telmap_user:                "{{ telmap_user }}",
            telmap_password:            "{{ telmap_password}}",
            passenger_messages:         {
                'from'      : '{% trans "Where From?" %}',
                'to'        : '{% trans "Where To?" %}',
                'register'  : '{% trans "First Time?" %}'
            }
        });

    });

</script>
{% endblock %}

{% block topcontrol %}
    <form id="order_form" method="post" action="{% url ordering.passenger_controller.book_order %}">
        {% csrf_token %}
        {% for field in form %}
            {% if field.name in hidden_fields %}
                {{ field.as_hidden }}
            {% else %}
                <input type="hidden" id="id_geocoded_{{ field.name }}" name="geocoded_{{ field.name }}"/>
            {%  endif %}
        {% endfor %}
        <div class="padder">
            <input type=text class="big_text a_marker" id="id_from_raw" name="from_raw" placeholder="{% trans 'Enter street and city' %}"/>
        </div>
        <div class="padder">
            <input type=text class="big_text b_marker" id="id_to_raw" name="to_raw" placeholder="{% trans 'Enter street and city' %}"/>
        </div>
    </form>
{% endblock topcontrol %}
{% block content %}
    <div id="map"></div>
{% endblock content %}
{% block bottom_toolbar %}
    <button class="order_button" id="order_button"></button>
{% endblock bottom_toolbar %}
{% block footer %}
{% endblock footer %}